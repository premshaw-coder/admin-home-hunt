<div class="card">
    <p-table #dt [resizableColumns]="true" [reorderableColumns]="true" styleClass="table-vertical-borders"
        [columns]="selectedColumns" [value]="products" [exportHeader]="'customExportHeader'" [paginator]="true"
        [rows]="5" [tableStyle]="{ 'min-width': '50rem' }" [rowsPerPageOptions]="[5, 10, 20]">
        <ng-template #caption>
            <div class="flex_row flex_justify_between flex_align_center">
                <div>
                    <p-multiselect optionLabel="name" [maxSelectedLabels]="4" [display]="selectedColumns.length> 2 ? 'comma':'chip'" [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header"
                        selectedItemsLabel="{0} columns selected" [style]="{ 'min-width': '200px' }"
                        placeholder="Choose Columns" />
                </div>
                <div>
                    <p-button label="Create rent Listing" icon="pi pi-plus-circle" />
                    <p-button icon="pi pi-external-link" label="Export" (click)="dt.exportCSV()"
                        [style]="{'margin-left': '12px'}" />
                </div>
            </div>
        </ng-template>
        <ng-template #header let-columns>
            <tr>
                <th style="width:3rem"></th>
                <th pReorderableColumn pResizableColumn pSortableColumn="code" style="width:20%">
                    Code <p-sortIcon field="code" />
                </th>

                @for (col of columns; track $index) {
                <th pReorderableColumn [pSortableColumn]="col.field" pResizableColumn>
                    {{ col.header }} <p-sortIcon [field]="col.field" />
                </th>
                }
                <th pReorderableColumn pResizableColumn>Action</th>
            </tr>
        </ng-template>
        <ng-template #body let-product let-columns="columns" let-index="rowIndex">
            <tr [pReorderableRow]="index">
                <td>
                    <span class="pi pi-bars" pReorderableRowHandle></span>
                </td>
                <td>{{ product.code }}</td>
                @for (col of columns; track $index) {
                <td>
                    {{ product[col.field] }}
                </td>
                }
                <td>
                    <p-splitbutton #splitBtn [raised]="true" [appendTo]="'body'" label="View" icon="pi pi-eye"
                        dropdownIcon="pi pi-cog" [model]="items" (onClick)="showMenu($event, splitBtn)" />
                </td>

            </tr>
        </ng-template>
    </p-table>
</div>